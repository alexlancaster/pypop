[tool.cibuildwheel]
skip = ["*-win32", "*_i686", "*-musllinux_*"]  # skip 32-bit builds and musllinux
test-extras = ["test"]
test-command = "pytest -s -v {package}/tests"

[tool.cibuildwheel.linux]
# for CentOS-based runners, local cibuildwheel docker
before-all="yum install -y swig gsl-devel"
# GitHub runners use Ubuntu
#before-all="apt install swig libgsl-dev"

[tool.cibuildwheel.macos]
before-all = "brew install swig gsl"
# FIXME: on MacOS, cibuildwheel team suggests building these from
# source within the container, rather than using 'brew'

[tool.cibuildwheel.windows]
# use nuget to install gsl on Windows, and manually supply paths
before-all = ["nuget install gsl-msvc-x86 -Version 2.3.0.2779",
	   "ls -R gsl-msvc-x86.2.3.0.2779"]
environment = { CPATH="gsl-msvc-x86.2.3.0.2779\\\\build\\\\native", LIBRARY_PATH="gsl-msvc-x86.2.3.0.2779\\\\build\\\\native\\\\lib\\\\Win32\\\\Release" }